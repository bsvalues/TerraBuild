# MCP Matrix Upload Module UX Specification

## Overview

The Matrix Upload module provides an intelligent interface for uploading, validating, and analyzing cost matrix Excel files. It uses a sequence of specialized AI agents to process the file and extract insights about building costs.

## User Flow

1. **File Upload**
   - User selects or drags-and-drops an Excel file
   - Client-side validation ensures file is properly formatted
   - UI shows upload progress indicator

2. **Validation Phase**
   - **InquisitorAgent** validates file structure and content
   - UI shows validation progress
   - Validation results display success or failure with detailed messages

3. **Interpretation Phase**
   - If validation successful, **InterpreterAgent** parses Excel data
   - Extracts region, building type, and cost information
   - UI shows a preview table of parsed matrix data

4. **Analysis Phase**
   - **VisualizerAgent** analyzes cost patterns and anomalies
   - Generates insights about regional variations and potential issues
   - UI displays actionable insights and recommendations

## UI Components

### 1. Upload Zone
- Drag-and-drop area or file selection button
- Accepts only .xlsx and .xls files
- Shows selected filename and file size

### 2. Import Status Panel
- Shows current processing stage
- Displays validation results
- Lists detected regions and building types

### 3. Matrix Preview Table
- Tabular view of parsed cost matrix data
- Sortable columns
- Highlights any potential data issues

### 4. Cost Insight Panel
- Shows insights generated by the VisualizerAgent
- Categorizes insights by type (anomaly, trend, recommendation)
- Allows filtering of insights by category

## Agent System

The Matrix Upload module relies on three specialized agents:

1. **InquisitorAgent**
   - Validates file structure
   - Ensures required sheets are present
   - Verifies column formats and data types

2. **InterpreterAgent**
   - Parses Excel data into structured JSON
   - Maps regions and building types to standardized codes
   - Calculates derived metrics (min/max/avg costs)

3. **VisualizerAgent**
   - Analyzes cost patterns across regions and building types
   - Identifies anomalies and outliers
   - Generates actionable insights and recommendations

## Integration

The Matrix Upload module integrates with the MCP DevOps Kit and uses the agent orchestration system for processing. It communicates with the backend via API endpoints defined in the MCP framework.

## Error Handling

- Client-side validation for file format and size
- Detailed error messages for validation failures
- Graceful handling of agent processing errors
- Retry mechanisms for transient failures

## Future Enhancements

- Batch upload of multiple files
- Cost comparison across multiple matrices
- Historical trend analysis
- Machine learning-based cost anomaly detection
- GIS integration for spatial cost visualization